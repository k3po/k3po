#
# Copyright 2007-2015, Kaazing Corporation. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

#connect tcp://127.0.0.1:8011
#connected

# AMQP default header
# wait 3000
write [0x41 0x4D 0x51 0x50 0x00 0x00 0x09 0x01]

# AMQP Start
read [0x01 0x00 0x00 0x00 0x00 0x00 0xa7 0x00 0x0a 0x00 0x0a]

# continue reading Start: AMQPLAIN PLAIN CRAM-MD5 en_US
# wait 0
read [0x00 0x09 0x00 0x00 0x00 0x79 0x07 0x70 0x72 0x6f 0x64 0x75 0x63 0x74 0x53 0x00 0x00 0x00 0x04 0x71 0x70 0x69 0x64 0x07 0x76 0x65 0x72 0x73 0x69 0x6f 0x6e 0x53 0x00 0x00 0x00 0x04 0x30 0x2e 0x32 0x38 0x0a 0x71 0x70]

# AmqpStartOK message with NO credentials
# library KaazingAmqpClient library_versionS 4.0.6 library_platform CNJavaScript AMQPLAIN LOGINS  PASSWORDS  en_US
# wait 10001
write [0x01 0x00 0x00 0x00 0x00 0x00 0x96 0x00 0x0A 0x00 0x0B 0x00 0x00 0x00 0x58 0x07 0x6C 0x69 0x62 0x72 0x61 0x72 0x79 0x53]
write [0x00 0x00 0x00 0x11 0x4B 0x61 0x61 0x7A 0x69 0x6E 0x67 0x41 0x6D 0x71 0x70 0x43 0x6C 0x69 0x65 0x6E 0x74 0x0F 0x6C 0x69]
write [0x62 0x72 0x61 0x72 0x79 0x5F 0x76 0x65 0x72 0x73 0x69 0x6F 0x6E 0x53 0x00 0x00 0x00 0x05 0x34 0x2E 0x30 0x2E 0x36 0x10]
write [0x6C 0x69 0x62 0x72 0x61 0x72 0x79 0x5F 0x70 0x6C 0x61 0x74 0x66 0x6F 0x72 0x6D 0x53 0x00 0x00 0x00 0x0A 0x4A 0x61 0x76]
write [0x49 0x4E 0x53 0x00 0x00 0x00 0x08 0x00 0x00 0x00 0x50 0x41 0x53 0x53 0x57 0x4F 0x52 0x44 0x53 0x00 0x00 0x00 0x05 0x65]
write [0x6E 0x5F 0x55 0x53 0xCE]


# AmqpTuneOkMessage
read [0x69 0x64 0x2e 0x62 0x75 0x69 0x6c 0x64 0x53 0x00 0x00 0x00 0x07 0x31 0x35 0x39 0x34 0x31 0x37 0x39]

write [0x01 0x00 0x00 0x00 0x00 0x00 0x0C 0x00 0x0A 0x00 0x1F 0x01 0x00 0x00 0x00 0xFF 0xFF 0x00 0x00 0xCE]

# wait 0
# AmqpOpenMessage
write [0x01 0x00 0x00 0x00 0x00 0x00 0x08 0x00 0x0A 0x00 0x28 0x01 0x2F 0x00 0x00 0xCE]

# wait 4000
# AmqpOpenOkMessage
read [0x12 0x71 0x70 0x69 0x64 0x2e 0x69 0x6e 0x73 0x74 0x61 0x6e 0x63 0x65]

