#
# Copyright 2007-2015, Kaazing Corporation. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

property location 'http://localhost:8080/echo'
property key ${ws:handshakeKey()}
property client125 ${ws:randomBytes(125)}

property challenge "Basic realm=\"demo\" saml-authn-request=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"

connect ${location}
connected

write method "GET"
write version "HTTP/1.1"
write header host
write header "Upgrade" "websocket"
write header "Connection" "Upgrade"
write header "Sec-WebSocket-Key" ${key}
write header "Sec-WebSocket-Version" "13"


read status "401" "Unauthorized"
read header "WWW-Authenticate" ${challenge} 
read notify FIRST_REQUEST_COMPLETE

connect await FIRST_REQUEST_COMPLETE
connect ${location}
connected

write method "GET"
write version "HTTP/1.1"
write header host
write header "Upgrade" "websocket"
write header "Authorization" "Basic realm=\"demo\" saml-authn-request=\"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\""
write header "Connection" "Upgrade"
write header "Sec-WebSocket-Key" ${key}
write header "Sec-WebSocket-Version" "13"


read status "101" /.+/
read version "HTTP/1.1"
read header "Upgrade" /(?i:websocket)/
read header "Connection" /(?i:Upgrade)/
read header "Sec-WebSocket-Accept" ${ws:handshakeHash(key)}

write [0x82 0x7d]
write ${client125}

read [0x88 0x02 0x03 0xea]